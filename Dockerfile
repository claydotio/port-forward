FROM node:4

EXPOSE 9042
EXPOSE 9180
EXPOSE 7199
EXPOSE 9160

RUN npm install -g mapport

CMD mapport 9042 $REMOTE_HOST_0:9042 & mapport 9180 $REMOTE_HOST_0:9180 & mapport 7199 $REMOTE_HOST_0:7199 & mapport 9160 $REMOTE_HOST_0:9160 & \
    mapport 9043 $REMOTE_HOST_1:9042 & mapport 9181 $REMOTE_HOST_1:9180 & mapport 7200 $REMOTE_HOST_1:7199 & mapport 9161 $REMOTE_HOST_1:9160 & \
    mapport 9044 $REMOTE_HOST_2:9042 & mapport 9182 $REMOTE_HOST_2:9180 & mapport 7201 $REMOTE_HOST_2:7199 & mapport 9162 $REMOTE_HOST_2:9160 & \
    mapport 9045 $REMOTE_HOST_3:9042 & mapport 9183 $REMOTE_HOST_3:9180 & mapport 7202 $REMOTE_HOST_3:7199 & mapport 9163 $REMOTE_HOST_3:9160
